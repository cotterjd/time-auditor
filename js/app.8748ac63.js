(function(){"use strict";var t={165:function(t,e,i){var n=i(963),r=i(252);function o(t,e,i,n,o,a){var c=(0,r.up)("Home");return(0,r.wg)(),(0,r.j4)(c)}var a=i(577);function c(t,e,i,n,o,c){var s=(0,r.up)("ta-header"),u=(0,r.up)("activity-list"),v=(0,r.up)("version");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(s,{start:t.start,onSubmitActivity:t.submitActivity,onAggregateActivity:t.aggregateActivity,startDay:t.startDay},null,8,["start","onSubmitActivity","onAggregateActivity","startDay"]),(0,r.Wm)(u,{groupedActivities:t.groupedActivities,goBack:t.goBackADay,goForward:t.goForwardADay},null,8,["groupedActivities","goBack","goForward"]),(0,r._)("p",null,(0,a.zw)(this.aggHours)+":"+(0,a.zw)(this.aggMinutes)+" of "+(0,a.zw)(this.aggActivity)+" in the past week",1),(0,r.Wm)(v)],64)}var s=i(582);function u(t,e,i,n,o,c){return(0,r.wg)(),(0,r.iD)("p",null,"Version: "+(0,a.zw)(t.version),1)}var v=(0,r.aZ)({name:"Version",data:function(){return{version:i(147).i8}}}),l=i(744);const d=(0,l.Z)(v,[["render",u]]);var g=d,f=function(t){return(0,r.dD)("data-v-ecc7eb4a"),t=t(),(0,r.Cn)(),t},p={class:"header-container"},h=f((function(){return(0,r._)("p",null,[(0,r._)("i",null,"No more wondering where the day went")],-1)})),y={class:"input-container"};function m(t,e,i,o,a,c){return(0,r.wg)(),(0,r.iD)("div",p,[(0,r._)("button",{onClick:e[0]||(e[0]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.onAggregate&&t.onAggregate.apply(t,e)})},"Aggregate"),h,t.start?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn start-btn",onClick:e[1]||(e[1]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.startTimer&&t.startTimer.apply(t,e)})},"Start Day")),(0,r.wy)((0,r._)("div",y,[(0,r.wy)((0,r._)("input",{class:"input","onUpdate:modelValue":e[2]||(e[2]=function(e){return t.activity=e}),onKeyup:e[3]||(e[3]=(0,n.D2)((function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.submitActivity&&t.submitActivity.apply(t,e)}),["enter"]))},null,544),[[n.nr,t.activity]]),(0,r._)("button",{id:"submit-button",class:"btn",onClick:e[4]||(e[4]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.onSubmit&&t.onSubmit.apply(t,e)})}," Submit Finished Activity ")],512),[[n.F8,t.start]])])}var w=(0,r.aZ)({name:"Header",components:{},data:function(){return{activity:""}},props:["start","submitActivity","startDay"],methods:{onSubmit:function(){this.$emit("submitActivity",this.activity),this.activity=""},onAggregate:function(){this.$emit("aggregateActivity",this.activity)},startTimer:function(){this.startDay()}}});const b=(0,l.Z)(w,[["render",m],["__scopeId","data-v-ecc7eb4a"]]);var A=b,D={class:"header"},k={class:"activity-name"},S={class:"activity-span"},_={class:"activity-time"};function T(t,e,i,n,o,c){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",D,[(0,r._)("button",{onClick:e[0]||(e[0]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.goForward&&t.goForward.apply(t,e)})},"<"),(0,r._)("button",{onClick:e[1]||(e[1]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.goBack&&t.goBack.apply(t,e)})},">")]),(0,r._)("span",null,(0,a.zw)(Object.keys(t.groupedActivities)[t.index]),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.groupedActivities[Object.keys(t.groupedActivities)[t.index]],(function(t){return(0,r.wg)(),(0,r.iD)("div",{key:t.id,class:"activity-list"},[(0,r._)("span",k,(0,a.zw)(t.activity),1),(0,r._)("span",S,(0,a.zw)(t.start)+"-"+(0,a.zw)(t.finish),1),(0,r._)("span",_,(0,a.zw)(t.timeTook),1)])})),128))],64)}var j=(0,r.aZ)({name:"ActivityList",components:{},props:["groupedActivities","goBack","goForward"],data:function(){return{index:0}}});const O=(0,l.Z)(j,[["render",T],["__scopeId","data-v-7b66115d"]]);var x=O,H=i(460),I=i(777),Z=i(899),C=i(0),F={hour12:!1,hour:"2-digit",minute:"2-digit"},B=(0,r.aZ)({name:"Home",components:{Version:g,TaHeader:A,ActivityList:x},data:function(){return{start:null,activities:[],groupedActivities:{},db:null,aggActivity:"",aggHours:0,aggMinutes:0,day:0}},computed:{},watch:{activities:function(t){this.groupedActivities=(0,H.vMG)((function(t){return t.date}),t)},day:function(t){var e=this;this.activities=[];var i=this.db.transaction(["activities"],"readwrite").objectStore("activities");i.openCursor().onsuccess=function(t){var i,n=null===(i=null===t||void 0===t?void 0:t.target)||void 0===i?void 0:i.result;n&&(n.value.date.includes((0,I.Z)(new Date,{days:e.day}).toLocaleDateString())&&(e.activities=(0,s.ev)([n.value],e.activities,!0)),n.continue())}}},created:function(){var t=this,e=window.indexedDB.open("timeLogs",1);e.onupgradeneeded=function(e){var i=e.target.result;if(i){var n=i.createObjectStore("activities",{autoIncrement:!0});n?(n.createIndex("start","start",{unique:!1}),n.createIndex("finish","finish",{unique:!1}),n.createIndex("activity","activity",{unique:!1}),n.createIndex("date","date",{unique:!1}),t.db=i):console.error("Error creating object objectStore")}else console.error("Error opening indexedDB")},e.onsuccess=function(e){var i=e.target.result;t.db=i}},mounted:function(){var t=this;this.start=localStorage.getItem("start")?new Date(localStorage.getItem("start")):null;var e=window.indexedDB.open("timeLogs",1);e.onsuccess=function(e){var i=e.target.result,n=i.transaction(["activities"],"readwrite").objectStore("activities");t.db=i,n.openCursor().onsuccess=function(e){var i,n=null===(i=null===e||void 0===e?void 0:e.target)||void 0===i?void 0:i.result;n&&(n.value.date.includes((new Date).toLocaleDateString())&&(t.activities=(0,s.ev)([n.value],t.activities,!0)),n.continue())}}},methods:{submitActivity:function(t){var e,i=this;if(this.db&&this.start){var n=null===(e=this.start)||void 0===e?void 0:e.toLocaleTimeString([],F),r=(new Date).toLocaleTimeString([],F),o={start:n,finish:r,activity:t,timeTook:this.getTimeTook(),date:"".concat((new Date).toString().split(" ")[0]," ").concat((new Date).toLocaleDateString())},a=this.db.transaction(["activities"],"readwrite").objectStore("activities"),c=a.add(o);c.onsuccess=function(t){i.activities=(0,s.ev)([o],i.activities,!0),localStorage.setItem("start",(new Date).toISOString()),i.start=new Date},c.onerror=function(t){console.error("Error adding activity",t)}}},startDay:function(){console.log("start day"),localStorage.setItem("start",(new Date).toISOString()),this.start=new Date},getTimeTook:function(){if(!this.start)return"";var t=Math.floor(((new Date).getTime()-this.start.getTime())/1e3/60);return"".concat(Math.floor(t/60),":").concat(t%60)},goBackADay:function(){this.day++},goForwardADay:function(){this.day--},aggregateActivity:function(t){var e=this;this.aggActivity=t,this.aggHours=0,this.aggMinutes=0;var i=this.db.transaction(["activities"],"readwrite").objectStore("activities");i.openCursor(null,"prev").onsuccess=function(i){var n,r=null===(n=null===i||void 0===i?void 0:i.target)||void 0===n?void 0:n.result;if(r){if(z(new Date(r.date)))return;if(console.log(r.value.date),r.value.activity===t){var o=r.value.timeTook.split(":"),a=o[0],c=o[1];e.aggHours=e.aggHours+Number(a),e.aggMinutes=e.aggMinutes+Number(c)}r.continue()}}}}});function z(t){(0,Z.Z)(new Date,1);return(0,C.Z)(new Date,t)>7}const L=(0,l.Z)(B,[["render",c]]);var M=L,q=(0,r.aZ)({name:"App",components:{Home:M}});const N=(0,l.Z)(q,[["render",o]]);var E=N,V=i(205);(0,V.z)("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var W=i(907),Y=(0,W.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,n.ri)(E).use(Y).mount("#app")},147:function(t){t.exports={i8:"1.12.1"}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,n,r,o){if(!n){var a=1/0;for(v=0;v<t.length;v++){n=t[v][0],r=t[v][1],o=t[v][2];for(var c=!0,s=0;s<n.length;s++)(!1&o||a>=o)&&Object.keys(i.O).every((function(t){return i.O[t](n[s])}))?n.splice(s--,1):(c=!1,o<a&&(a=o));if(c){t.splice(v--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var v=t.length;v>0&&t[v-1][2]>o;v--)t[v]=t[v-1];t[v]=[n,r,o]}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,o,a=n[0],c=n[1],s=n[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(r in c)i.o(c,r)&&(i.m[r]=c[r]);if(s)var v=s(i)}for(e&&e(n);u<a.length;u++)o=a[u],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(v)},n=self["webpackChunktime_auditor"]=self["webpackChunktime_auditor"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(165)}));n=i.O(n)})();
//# sourceMappingURL=app.8748ac63.js.map